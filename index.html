<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‹‚é‡é£™è½¦9 Â· æ“‚å°é€‰è½¦åŠ©æ‰‹ v0.9</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: system-ui, 'Segoe UI', Roboto, sans-serif;
        }
        body {
            background: #1a1f2b;
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 16px;
        }
        .card {
            max-width: 1200px;
            width: 100%;
            background: #121724;
            border-radius: 28px;
            padding: 24px;
            border: 1px solid #2f3a55;
            box-shadow: 0 12px 30px #00000080;
        }
        h1 {
            color: #fadf8a;
            font-size: 1.9rem;
            margin: 0 0 8px 0;
        }
        .sub {
            color: #9aabd0;
            margin-bottom: 24px;
            border-left: 4px solid #3a66b4;
            padding-left: 16px;
            font-size: 0.95rem;
        }
        .map-rows {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 30px;
        }
        .map-row {
            display: flex;
            align-items: center;
            gap: 12px;
            background: #1a2131;
            padding: 12px 16px;
            border-radius: 40px;
            border: 1px solid #2d3b57;
        }
        .map-index {
            width: 32px; height: 32px;
            background: #2c3e6b;
            color: #fadf8a;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        .map-select-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            flex: 1;
        }
        .select-wrapper {
            flex: 1 1 200px;
            min-width: 160px;
        }
        .select-wrapper label {
            display: block;
            font-size: 0.7rem;
            color: #7f8fb2;
            margin-bottom: 2px;
            text-transform: uppercase;
        }
        select {
            width: 100%;
            padding: 10px 14px;
            background: #0e1420;
            border: 1px solid #3b4770;
            color: #eef3ff;
            border-radius: 30px;
            font-size: 0.9rem;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%239aa9ce' stroke-width='2'><polyline points='6 9 12 15 18 9'/></svg>");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 14px;
        }
        select:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .garage {
            background: #1a212f;
            border-radius: 28px;
            padding: 20px;
            margin: 20px 0 25px;
            border: 1px solid #2f3f60;
        }
        .garage-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            color: #b7c6ec;
        }
        .garage-header h2 {
            margin: 0;
            font-size: 1.3rem;
            font-weight: 500;
        }
        .garage-actions {
            display: flex;
            gap: 12px;
        }
        .garage-btn {
            background: #26324a;
            border: 1px solid #4c6190;
            color: #cfdfff;
            padding: 4px 14px;
            border-radius: 30px;
            font-size: 0.85rem;
            cursor: pointer;
            user-select: none;
        }
        .garage-btn:hover {
            background: #2f3e60;
        }
        .car-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            max-height: 260px;
            overflow-y: auto;
            padding: 8px 4px;
            background: #0e1625;
            border-radius: 28px;
            border: 1px solid #2f3d60;
        }
        .car-tag {
            background: #1f2b41;
            color: #b9c8f0;
            padding: 6px 16px;
            border-radius: 40px;
            font-size: 0.9rem;
            border: 1px solid #3f5182;
            cursor: pointer;
            user-select: none;
            transition: 0.1s;
            display: inline-block;
        }
        .car-tag.selected {
            background: #f5c542;
            color: #121724;
            border-color: #ffd966;
            font-weight: 600;
            box-shadow: 0 0 10px #f5b81b;
        }
        .action {
            text-align: center;
            margin: 30px 0 20px;
        }
        .recommend-btn {
            background: linear-gradient(145deg, #f3b73e, #d48d1a);
            border: none;
            color: #121724;
            font-weight: bold;
            font-size: 1.4rem;
            padding: 16px 50px;
            border-radius: 50px;
            border-bottom: 3px solid #9e6512;
            cursor: pointer;
            box-shadow: 0 8px 12px #00000060;
        }
        .recommend-btn:hover {
            background: linear-gradient(145deg, #ffcc5c, #e69f2e);
        }
        .result-panel {
            background: #121a2b;
            border-radius: 28px;
            padding: 20px;
            border: 1px solid #2b3a60;
        }
        .result-title {
            color: #9eb1dc;
            margin-bottom: 16px;
            font-size: 1.1rem;
        }
        .scheme-selector {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .scheme-selector label {
            color: #b7c6ec;
            font-size: 0.95rem;
        }
        .scheme-selector select {
            width: auto;
            min-width: 280px;
            background: #1d263f;
            border-color: #4e6390;
        }
        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 14px;
        }
        .result-item {
            background: #1d263f;
            border-radius: 24px;
            padding: 16px 8px;
            text-align: center;
            border: 1px solid #36487a;
        }
        .result-map {
            font-weight: 600;
            color: #cfdbf5;
            font-size: 1rem;
            margin-bottom: 4px;
        }
        .result-bigmap {
            font-size: 0.7rem;
            color: #7a8bbd;
            margin-bottom: 12px;
        }
        .result-car {
            background: #273458;
            padding: 8px 0;
            border-radius: 30px;
            font-weight: 700;
            color: #fadf8a;
            border: 1px solid #5b71b0;
        }
        .result-car.empty {
            background: #1e2642;
            color: #7b87ad;
            border: 1px dashed #4d608b;
            font-weight: 400;
        }
        .footer-note {
            color: #5a6d9b;
            text-align: right;
            margin-top: 10px;
            font-size: 0.8rem;
        }
        .loading {
            color: #aaa;
            text-align: center;
            padding: 20px;
        }
    </style>
</head>
<body>
<div class="card">
    <h1>ğŸ æ“‚å°é€‰è½¦v0.9ï¼ˆéç¨³å®šç‰ˆæœ¬ï¼‰</h1>
    <div class="sub">äº”å¼ å›¾æ¨èè½¦è¾†ä¸é‡å¤ï¼Œåˆ—å‡ºæ‰€æœ‰å¯èƒ½çš„åˆ†é…æ–¹æ¡ˆï¼Œä¾›æ‚¨é€‰æ‹©ã€‚</div>

    <div class="map-rows" id="mapRowsContainer"></div>

    <div class="garage">
        <div class="garage-header">
            <h2>ğŸš— æˆ‘çš„è½¦åº“ </h2>
            <div class="garage-actions">
                <span class="garage-btn" id="selectAllBtn">å…¨éƒ¨ç‚¹äº®</span>
                <span class="garage-btn" id="clearAllBtn">å…¨éƒ¨ç†„ç­</span>
            </div>
        </div>
        <div class="car-grid" id="carGrid"></div>
    </div>

    <div class="action">
        <button class="recommend-btn" id="recommendBtn">âš¡ é‡æ–°è®¡ç®—æ‰€æœ‰æ–¹æ¡ˆ âš¡</button>
    </div>

    <div class="result-panel">
        <div class="result-title">ğŸ“‹ æ‰€æœ‰å¯è¡Œæ–¹æ¡ˆ</div>
        <div class="scheme-selector">
            <label for="schemeSelect">é€‰æ‹©æ–¹æ¡ˆï¼š</label>
            <select id="schemeSelect"></select>
        </div>
        <div class="result-grid" id="resultGrid"></div>
    </div>
    <div class="footer-note">*æ–¹æ¡ˆæŒ‰åœ°å›¾é¡ºåºåˆ†é…ï¼ŒåŒä¸€è¾†è½¦ä¸ä¼šå‡ºç°åœ¨ä¸¤ä¸ªå›¾ä¸­ã€‚</div>
</div>

<script>
(function() {
    // ---------- ç¡¬ç¼–ç è½¦è¾†åˆ—è¡¨ ----------
    const USER_CARS = [
        "æ°çš‡", "f5r", "rå…”", "300+", "ç»ç’ƒ", "é“¶ç”µ", "å°èœ¥èœ´", "æ¶é­”", "å¤§è¶…", "è«æ–¯å‹’", 
        "21c", "cc850", "f5", "é£é¾™", "æ°å¼Ÿ", "é»‘é¾™", "ssc", "c2", "çŒ«å¤´é¹°", "ç™½é¾™",
        "æ°å“¥", "psé¾™", "è‚¥é¾™", "att", "fp1", "urs", "ç»Ÿæ²»", "divo", "æ³•æ‹‰ç¬¬", "é€Ÿå°¾", 
        "ç§‹ç‹", "sf90", "cs", "è‡ªç‡ƒ", "c1", "ç‹¼ç‹", "å¡çº³", "ç”µç‰›", "å¤ä»‡", "å°è‡ªç‡ƒ", 
        "è‡ªç§", "ä¸‡è¾¾", "ç‹¼å´½", "ç«å±±", "tç‰›", "éœ“è™¹gtr", "007s", "9x8", "çº¢ç§‹ç‹", "fe3", 
        "é£æ‰‡", "rç‰›", "er9", "å…­å­", "sgt", "600lt", "å¸•æ¢…", "5n"
    ];

    // ---------- å…¨å±€å˜é‡ ----------
    let RACE_DATA = null;               // å°†ä»å¤–éƒ¨åŠ è½½
    let bigMapList = [];
    let smallMapsByBig = {};

    // DOM å…ƒç´ 
    const mapRowsContainer = document.getElementById('mapRowsContainer');
    const carGrid = document.getElementById('carGrid');
    const selectAllBtn = document.getElementById('selectAllBtn');
    const clearAllBtn = document.getElementById('clearAllBtn');
    const recommendBtn = document.getElementById('recommendBtn');
    const schemeSelect = document.getElementById('schemeSelect');
    const resultGrid = document.getElementById('resultGrid');

    const ROWS = 5;
    const bigSelects = [];
    const smallSelects = [];

    // ç‚¹äº®çŠ¶æ€
    let selectedCars = new Set();

    // å½“å‰æ‰€æœ‰æ–¹æ¡ˆåˆ—è¡¨
    let allSchemes = [];  // æ¯ä¸ªå…ƒç´ ä¸ºé•¿åº¦ä¸º5çš„æ•°ç»„ï¼Œå¯¹åº”æ¯å¼ å›¾åˆ†é…çš„è½¦åï¼ˆnullè¡¨ç¤ºè¯¥å›¾æœªé€‰æˆ–æ— æ³•åˆ†é…ï¼‰

    // ---------- å·¥å…·å‡½æ•°ï¼šå°†å¯èƒ½å«æ–œæ çš„è½¦åæ‹†æˆæ•°ç»„ ----------
    function parseCarGroup(cell) {
        if (typeof cell === 'string' && cell.includes('/')) {
            return cell.split('/').map(s => s.trim());
        }
        return [cell];
    }

    // ---------- æ„å»ºåœ°å›¾ç´¢å¼• (åŸºäºåŠ è½½çš„æ•°æ®) ----------
    function buildMapIndex() {
        if (!RACE_DATA || !RACE_DATA.æ“‚å°é€‰è½¦è¡¨) return;
        const bigSet = new Set();
        const map = {};

        RACE_DATA.æ“‚å°é€‰è½¦è¡¨.forEach(item => {
            const big = item.å¤§åœ°å›¾;
            const small = item.å°åœ°å›¾;
            const orderGroups = item.é€‰è½¦é¡ºåº.map(cell => parseCarGroup(cell));

            bigSet.add(big);
            if (!map[big]) map[big] = [];
            map[big].push({ name: small, orderGroups });
        });

        bigMapList = Array.from(bigSet).sort();
        smallMapsByBig = map;
    }

    // ---------- æ¸²æŸ“äº”ä¸ªåœ°å›¾è¡Œ ----------
    function renderMapRows() {
        mapRowsContainer.innerHTML = '';
        for (let i = 0; i < ROWS; i++) {
            const rowDiv = document.createElement('div');
            rowDiv.className = 'map-row';
            rowDiv.innerHTML = `
                <div class="map-index">${i+1}</div>
                <div class="map-select-group">
                    <div class="select-wrapper">
                        <label>å¤§åœ°å›¾</label>
                        <select class="big-map-select" data-index="${i}"></select>
                    </div>
                    <div class="select-wrapper">
                        <label>å°åœ°å›¾</label>
                        <select class="small-map-select" data-index="${i}" disabled></select>
                    </div>
                </div>
            `;
            mapRowsContainer.appendChild(rowDiv);
            const bigSel = rowDiv.querySelector('.big-map-select');
            const smallSel = rowDiv.querySelector('.small-map-select');
            bigSelects[i] = bigSel;
            smallSelects[i] = smallSel;
        }
    }

    // ---------- åˆ·æ–°å¤§åœ°å›¾ä¸‹æ‹‰ (äº’æ–¥) ----------
    function refreshBigMaps() {
        const oldBigValues = bigSelects.map(sel => sel.value);
        const oldSmallValues = smallSelects.map(sel => sel.value);
        const currentSelectedBigs = oldBigValues.filter(v => v !== '');

        bigSelects.forEach((sel, idx) => {
            const oldVal = oldBigValues[idx];
            sel.innerHTML = '';

            const emptyOpt = document.createElement('option');
            emptyOpt.value = '';
            emptyOpt.textContent = '-- å¤§åœ°å›¾ --';
            sel.appendChild(emptyOpt);

            bigMapList.forEach(big => {
                const opt = document.createElement('option');
                opt.value = big;
                opt.textContent = big;

                const usedCount = currentSelectedBigs.filter(v => v === big).length;
                const isSelfSelected = (oldVal === big);
                const otherCount = usedCount - (isSelfSelected ? 1 : 0);
                if (otherCount > 0) {
                    opt.disabled = true;
                }
                sel.appendChild(opt);
            });

            if (oldVal && Array.from(sel.options).some(opt => opt.value === oldVal && !opt.disabled)) {
                sel.value = oldVal;
            } else {
                sel.value = '';
            }
        });

        bigSelects.forEach((sel, idx) => {
            const newBig = sel.value;
            const oldSmall = oldSmallValues[idx];
            updateSmallMapSelect(idx, newBig, oldSmall);
        });
    }

    // æ›´æ–°å•ä¸ªå°åœ°å›¾ä¸‹æ‹‰
    function updateSmallMapSelect(index, bigMap, oldSmall) {
        const smallSel = smallSelects[index];
        smallSel.innerHTML = '';
        if (!bigMap || !smallMapsByBig[bigMap]) {
            smallSel.disabled = true;
            const opt = document.createElement('option');
            opt.textContent = '-- å…ˆé€‰å¤§åœ°å›¾ --';
            smallSel.appendChild(opt);
            return;
        }

        smallSel.disabled = false;
        const emptyOpt = document.createElement('option');
        emptyOpt.value = '';
        emptyOpt.textContent = '-- å°åœ°å›¾ --';
        smallSel.appendChild(emptyOpt);

        const smallList = smallMapsByBig[bigMap];
        smallList.forEach(sm => {
            const opt = document.createElement('option');
            opt.value = sm.name;
            opt.textContent = sm.name;
            smallSel.appendChild(opt);
        });

        if (oldSmall && smallList.some(sm => sm.name === oldSmall)) {
            smallSel.value = oldSmall;
        } else {
            smallSel.value = '';
        }
    }

    // ---------- æ¸²æŸ“è½¦åº“ç½‘æ ¼ ----------
    function renderGarage() {
        carGrid.innerHTML = '';
        USER_CARS.forEach(car => {
            const span = document.createElement('span');
            span.className = 'car-tag' + (selectedCars.has(car) ? ' selected' : '');
            span.textContent = car;
            span.addEventListener('click', () => {
                if (selectedCars.has(car)) selectedCars.delete(car);
                else selectedCars.add(car);
                renderGarage();
            });
            carGrid.appendChild(span);
        });
    }

    function selectAll() {
        USER_CARS.forEach(c => selectedCars.add(c));
        renderGarage();
    }
    function clearAll() {
        selectedCars.clear();
        renderGarage();
    }

    // ---------- è·å–åœ°å›¾çš„æ¨èé¡ºåº ----------
    function getOrderGroups(big, small) {
        const list = smallMapsByBig[big];
        if (!list) return null;
        const found = list.find(item => item.name === small);
        return found ? found.orderGroups : null;
    }

    // ---------- ç”Ÿæˆæ‰€æœ‰å¯è¡Œçš„åˆ†é…æ–¹æ¡ˆ (å›æº¯) ----------
    function generateAllSchemes(selections, ownedSet) {
        // selections: é•¿åº¦ä¸º5çš„æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ ä¸º {big, small} æˆ– null
        // æ‰¾å‡ºæœ‰æ•ˆçš„åœ°å›¾ç´¢å¼•
        const validIndices = [];
        const validSelections = [];
        selections.forEach((sel, idx) => {
            if (sel) {
                validIndices.push(idx);
                validSelections.push(sel);
            }
        });
        const n = validIndices.length;
        if (n === 0) return [];

        // é¢„å…ˆè®¡ç®—æ¯å¼ æœ‰æ•ˆå›¾çš„å€™é€‰ç»„ï¼ˆæ¯ç»„å†…åªä¿ç•™å·²æ‹¥æœ‰çš„è½¦ï¼‰
        const candidatesPerMap = validSelections.map(sel => {
            const groups = getOrderGroups(sel.big, sel.small);
            if (!groups) return [];
            // ä¿ç•™ç»„ç»“æ„ï¼Œæ¯ç»„è¿‡æ»¤å‡ºæ‹¥æœ‰çš„è½¦
            return groups.map(group => group.filter(car => ownedSet.has(car)));
        });

        const results = [];
        const used = new Set();
        const current = []; // å­˜æ”¾ {mapIdx, car}ï¼ŒmapIdxæ˜¯æœ‰æ•ˆå›¾ä¸­çš„ç´¢å¼•

        function backtrack(mapIdx) {
            if (mapIdx === n) {
                // æ„å»ºå®Œæ•´åˆ†é…æ•°ç»„ (é•¿åº¦5)
                const assignment = new Array(5).fill(null);
                current.forEach(item => {
                    assignment[validIndices[item.mapIdx]] = item.car;
                });
                results.push(assignment);
                return;
            }

            const groups = candidatesPerMap[mapIdx];
            // å¦‚æœè¯¥å›¾æ²¡æœ‰å€™é€‰ç»„ï¼Œç›´æ¥è¿”å›ï¼ˆæ­¤è·¯ä¸é€šï¼‰
            if (groups.length === 0) return;

            for (let group of groups) {
                if (group.length === 0) continue;
                for (let car of group) {
                    if (!used.has(car)) {
                        used.add(car);
                        current.push({ mapIdx, car });
                        backtrack(mapIdx + 1);
                        current.pop();
                        used.delete(car);
                    }
                }
            }
        }

        backtrack(0);
        return results;
    }

    // ---------- æ›´æ–°æ–¹æ¡ˆä¸‹æ‹‰åˆ—è¡¨å’Œç»“æœå±•ç¤º ----------
    function updateSchemesAndResults() {
        // æ”¶é›†å½“å‰äº”å¼ å›¾çš„é€‰æ‹©
        const selections = [];
        for (let i = 0; i < ROWS; i++) {
            const big = bigSelects[i].value;
            const small = smallSelects[i].value;
            if (big && small) {
                selections.push({ big, small });
            } else {
                selections.push(null);
            }
        }

        const owned = selectedCars;
        allSchemes = generateAllSchemes(selections, owned);

        // å¡«å……ä¸‹æ‹‰
        schemeSelect.innerHTML = '';
        if (allSchemes.length === 0) {
            const option = document.createElement('option');
            option.textContent = 'æ— å¯è¡Œæ–¹æ¡ˆ';
            option.value = '-1';
            schemeSelect.appendChild(option);
            schemeSelect.disabled = true;
            // æ˜¾ç¤ºæ‰€æœ‰åœ°å›¾æ— å¯ç”¨è½¦
            renderSchemeInGrid(null);
        } else {
            schemeSelect.disabled = false;
            allSchemes.forEach((scheme, idx) => {
                // ç”Ÿæˆæ–¹æ¡ˆæ‘˜è¦ï¼šå›¾åºå·+è½¦åï¼Œä¾‹å¦‚â€œ1:è½¦A 2:è½¦B â€¦â€
                const parts = [];
                for (let i = 0; i < selections.length; i++) {
                    if (selections[i]) {
                        const car = scheme[i] || '?';
                        parts.push(`${i+1}:${car}`);
                    }
                }
                const option = document.createElement('option');
                option.value = idx;
                option.textContent = `æ–¹æ¡ˆ${idx+1} â€” ` + parts.join(' ');
                schemeSelect.appendChild(option);
            });
            // é»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ªæ–¹æ¡ˆ
            schemeSelect.value = 0;
            renderSchemeInGrid(allSchemes[0]);
        }
    }

    // å°†æŒ‡å®šæ–¹æ¡ˆæ¸²æŸ“åˆ°ç»“æœç½‘æ ¼
    function renderSchemeInGrid(scheme) {
        if (!scheme) {
            // æ— æ–¹æ¡ˆï¼šæ‰€æœ‰å·²é€‰åœ°å›¾æ˜¾ç¤ºâ€œæ— å¯ç”¨è½¦â€
            let html = '';
            for (let i = 0; i < ROWS; i++) {
                const big = bigSelects[i].value;
                const small = smallSelects[i].value;
                if (big && small) {
                    html += `<div class="result-item"><div class="result-map">${small}</div><div class="result-bigmap">${big}</div><div class="result-car empty">âŒ æ— å¯ç”¨è½¦</div></div>`;
                } else {
                    html += `<div class="result-item"><div class="result-map">ç¬¬${i+1}å›¾</div><div class="result-bigmap">æœªé€‰åœ°å›¾</div><div class="result-car empty">â›” æœªé€‰</div></div>`;
                }
            }
            resultGrid.innerHTML = html;
            return;
        }

        let html = '';
        for (let i = 0; i < ROWS; i++) {
            const big = bigSelects[i].value;
            const small = smallSelects[i].value;
            if (big && small) {
                const car = scheme[i];
                if (car) {
                    html += `<div class="result-item"><div class="result-map">${small}</div><div class="result-bigmap">${big}</div><div class="result-car">ğŸï¸ ${car}</div></div>`;
                } else {
                    html += `<div class="result-item"><div class="result-map">${small}</div><div class="result-bigmap">${big}</div><div class="result-car empty">âŒ æ— å¯ç”¨è½¦</div></div>`;
                }
            } else {
                html += `<div class="result-item"><div class="result-map">ç¬¬${i+1}å›¾</div><div class="result-bigmap">æœªé€‰åœ°å›¾</div><div class="result-car empty">â›” æœªé€‰</div></div>`;
            }
        }
        resultGrid.innerHTML = html;
    }

    // ---------- ç»‘å®šäº‹ä»¶ ----------
    function bindEvents() {
        bigSelects.forEach(sel => sel.addEventListener('change', refreshBigMaps));
        recommendBtn.addEventListener('click', () => {
            updateSchemesAndResults();
        });
        schemeSelect.addEventListener('change', (e) => {
            const idx = parseInt(e.target.value, 10);
            if (!isNaN(idx) && idx >= 0 && idx < allSchemes.length) {
                renderSchemeInGrid(allSchemes[idx]);
            }
        });
        selectAllBtn.addEventListener('click', selectAll);
        clearAllBtn.addEventListener('click', clearAll);
    }

    // ---------- åˆå§‹åŒ– (ç­‰å¾…æ•°æ®åŠ è½½) ----------
    async function initApp() {
        try {
            const response = await fetch('data.json');
            if (!response.ok) throw new Error('æ•°æ®åŠ è½½å¤±è´¥');
            RACE_DATA = await response.json();
            buildMapIndex();

            renderMapRows();
            renderGarage();
            refreshBigMaps();
            bindEvents();
            updateSchemesAndResults(); // åˆå§‹è®¡ç®—ç»“æœ
        } catch (err) {
            mapRowsContainer.innerHTML = `<div class="loading">âŒ åŠ è½½æ•°æ®å¤±è´¥ï¼Œè¯·ç¡®ä¿ data.json å­˜åœ¨ä¸”å¯è®¿é—®</div>`;
            console.error(err);
        }
    }

    initApp();
})();
</script>
</body>
</html>







